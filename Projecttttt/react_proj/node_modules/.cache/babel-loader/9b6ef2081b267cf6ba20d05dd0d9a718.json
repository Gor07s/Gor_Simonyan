{"ast":null,"code":"var _jsxFileName = \"/home/gor/Project/Email_tamplate/react_proj/src/Components/useTemplate.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let template = [];\nexport let recipients = [];\nexport let vars = [];\nexport let show = [];\nexport class UseTemplate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiResponse: \"\",\n      apiResponseTo: \"\",\n      apiResponseVars: \"\",\n      myTempIsClick: false,\n      myDefIsClick: false,\n      tempClicked: false,\n      currentTemp: {},\n      defaultTemps: \"\"\n    };\n    this.myTemplates = this.myTemplates.bind(this);\n    this.showMyTemps = this.showMyTemps.bind(this);\n    this.showDefTemps = this.showDefTemps.bind(this);\n    this.templateOnClick = this.templateOnClick.bind(this);\n    this.defOnClick = this.defOnClick.bind(this);\n    this.UseTemplateFunc = this.UseTemplateFunc.bind(this);\n    this.DelTemplateFunc = this.DelTemplateFunc.bind(this);\n  }\n\n  templateOnClick(id) {\n    const template = this.state.apiResponse.filter(template => template.id == id)[0];\n    this.setState({\n      currentTemp: template,\n      tempClicked: true\n    });\n  }\n\n  defOnClick(id) {\n    const template = this.state.defaultTemps.filter(template => template.id == id)[0];\n    this.setState({\n      currentTemp: template,\n      tempClicked: true\n    });\n  }\n\n  async myTemplates() {\n    const div = document.getElementById(\"forTemps\");\n    await fetch(\"/useTemplate/templates\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.text()).then(res => this.setState({\n      apiResponse: JSON.parse(res)\n    }));\n    await fetch(\"/useTemplate/recipients\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.text()).then(res => this.setState({\n      apiResponseTo: JSON.parse(res)\n    }));\n    await fetch(\"/useTemplate/vars\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.text()).then(res => this.setState({\n      apiResponseVars: JSON.parse(res)\n    }));\n    this.state.apiResponse.forEach((template, index) => {\n      const ep = document.getElementById(index + 1);\n\n      if (ep === null) {\n        const p = document.createElement(\"p\");\n        p.id = index + 1;\n        p.innerHTML = template.templateName;\n\n        p.onclick = () => this.templateOnClick(template.id);\n\n        div.appendChild(p);\n      }\n    });\n  }\n\n  async showDefTemps() {\n    const temp = document.getElementById(\"forDefs\");\n    await fetch(\"/useTemplate/defaults\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.text()).then(res => this.setState({\n      defaultTemps: JSON.parse(res)\n    }));\n    this.state.defaultTemps.forEach((template, index) => {\n      const ep = document.getElementById(\"def\" + (index + 1));\n\n      if (ep === null) {\n        const p = document.createElement(\"p\");\n        p.id = \"def\" + (index + 1);\n        p.innerHTML = template.templateName;\n\n        p.onclick = () => this.defOnClick(template.id);\n\n        temp.appendChild(p);\n      }\n    });\n\n    if (this.state.myDefIsClick) {\n      temp.style.display = \"none\";\n    } else {\n      temp.style.display = \"block\";\n    }\n\n    this.setState({\n      myDefIsClick: !this.state.myDefIsClick,\n      tempClicked: false,\n      currentTemp: null\n    });\n  }\n\n  showMyTemps() {\n    this.myTemplates();\n    const temp = document.getElementById(\"forTemps\");\n\n    if (this.state.myTempIsClick) {\n      temp.style.display = \"none\";\n    } else {\n      temp.style.display = \"block\";\n    }\n\n    this.setState({\n      myTempIsClick: !this.state.myTempIsClick,\n      tempClicked: false,\n      currentTemp: null\n    });\n  }\n\n  UseTemplateFunc() {\n    template.splice(0, template.length);\n    vars.splice(0, vars.length);\n    recipients.splice(0, recipients.length);\n    template.push(this.state.currentTemp);\n    this.state.apiResponseTo.filter(temp => temp.tableId == this.state.currentTemp.id).forEach(element => recipients.push(element.email));\n    this.state.apiResponseVars.filter(temp => temp.tableId == this.state.currentTemp.id).forEach(element => vars.push(element));\n    show.push(true);\n  }\n\n  async DelTemplateFunc() {\n    await fetch(\"/useTemplate/delete\", {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: this.state.currentTemp.id\n      })\n    });\n\n    for (let i = 1; i <= this.state.apiResponse.length; i++) {\n      const p = document.getElementById(i);\n      p.parentNode.removeChild(p);\n    }\n\n    await this.showMyTemps();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        \"width\": \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"back\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"UseTempsDiv\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"useTempsGeneral\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"useTemplatesMenu\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"defTemps\",\n              onClick: this.showDefTemps,\n              children: \"Default Templates\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"myTemps\",\n              onClick: this.showMyTemps,\n              children: \"My Templates\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"forTemps\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"forDefs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), this.state.tempClicked && /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"exampleSpan\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"titleDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              id: \"titleLabel\",\n              htmlFor: \"title\",\n              className: \"form\",\n              children: \"title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"title\",\n              className: \"form\",\n              value: this.state.currentTemp.templateTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"example\",\n            value: this.state.currentTemp.templateText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"useButtons\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/useTemplate/send\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"useTemplateButton\",\n                onClick: () => this.UseTemplateFunc(),\n                children: \"Use\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/useTemplate/modify\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"modTemplateButton\",\n                onClick: () => this.UseTemplateFunc(),\n                children: \"Modify\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"delTemplateButton\",\n              onClick: () => this.DelTemplateFunc(),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/gor/Project/Email_tamplate/react_proj/src/Components/useTemplate.js"],"names":["React","Component","Link","template","recipients","vars","show","UseTemplate","constructor","props","state","apiResponse","apiResponseTo","apiResponseVars","myTempIsClick","myDefIsClick","tempClicked","currentTemp","defaultTemps","myTemplates","bind","showMyTemps","showDefTemps","templateOnClick","defOnClick","UseTemplateFunc","DelTemplateFunc","id","filter","setState","div","document","getElementById","fetch","method","headers","then","res","text","JSON","parse","forEach","index","ep","p","createElement","innerHTML","templateName","onclick","appendChild","temp","style","display","splice","length","push","tableId","element","email","body","stringify","i","parentNode","removeChild","render","templateTitle","templateText"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,OAAO,IAAIC,QAAQ,GAAG,EAAf;AACP,OAAO,IAAIC,UAAU,GAAG,EAAjB;AACP,OAAO,IAAIC,IAAI,GAAG,EAAX;AACP,OAAO,IAAIC,IAAI,GAAG,EAAX;AAEP,OAAO,MAAMC,WAAN,SAA0BN,SAA1B,CAAmC;AACtCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAY;AACRC,MAAAA,WAAW,EAAE,EADL;AAERC,MAAAA,aAAa,EAAE,EAFP;AAGRC,MAAAA,eAAe,EAAE,EAHT;AAIRC,MAAAA,aAAa,EAAE,KAJP;AAKRC,MAAAA,YAAY,EAAE,KALN;AAMRC,MAAAA,WAAW,EAAE,KANL;AAORC,MAAAA,WAAW,EAAE,EAPL;AAQRC,MAAAA,YAAY,EAAE;AARN,KAAZ;AAWA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKG,eAAL,GAAuB,KAAKA,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKI,UAAL,GAAkB,KAAKA,UAAL,CAAgBJ,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKK,eAAL,GAAuB,KAAKA,eAAL,CAAqBL,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKM,eAAL,GAAuB,KAAKA,eAAL,CAAqBN,IAArB,CAA0B,IAA1B,CAAvB;AACH;;AAEDG,EAAAA,eAAe,CAACI,EAAD,EAAI;AACf,UAAMxB,QAAQ,GAAG,KAAKO,KAAL,CAAWC,WAAX,CAAuBiB,MAAvB,CAA8BzB,QAAQ,IAAIA,QAAQ,CAACwB,EAAT,IAAeA,EAAzD,EAA6D,CAA7D,CAAjB;AACA,SAAKE,QAAL,CAAc;AAACZ,MAAAA,WAAW,EAAEd,QAAd;AACMa,MAAAA,WAAW,EAAE;AADnB,KAAd;AAEH;;AAEDQ,EAAAA,UAAU,CAACG,EAAD,EAAI;AACV,UAAMxB,QAAQ,GAAG,KAAKO,KAAL,CAAWQ,YAAX,CAAwBU,MAAxB,CAA+BzB,QAAQ,IAAIA,QAAQ,CAACwB,EAAT,IAAeA,EAA1D,EAA8D,CAA9D,CAAjB;AACA,SAAKE,QAAL,CAAc;AAACZ,MAAAA,WAAW,EAAEd,QAAd;AACMa,MAAAA,WAAW,EAAE;AADnB,KAAd;AAEH;;AAEgB,QAAXG,WAAW,GAAE;AACf,UAAMW,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAZ;AACA,UAAMC,KAAK,CAAC,wBAAD,EAA2B;AAClCC,MAAAA,MAAM,EAAC,KAD2B;AAElCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFyB,KAA3B,CAAL,CAIDC,IAJC,CAIIC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJX,EAKDF,IALC,CAKIC,GAAG,IAAI,KAAKR,QAAL,CAAc;AAAClB,MAAAA,WAAW,EAAE4B,IAAI,CAACC,KAAL,CAAWH,GAAX;AAAd,KAAd,CALX,CAAN;AAMA,UAAMJ,KAAK,CAAC,yBAAD,EAA4B;AACnCC,MAAAA,MAAM,EAAC,KAD4B;AAEnCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAF0B,KAA5B,CAAL,CAIDC,IAJC,CAIIC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJX,EAKDF,IALC,CAKIC,GAAG,IAAI,KAAKR,QAAL,CAAc;AAACjB,MAAAA,aAAa,EAAE2B,IAAI,CAACC,KAAL,CAAWH,GAAX;AAAhB,KAAd,CALX,CAAN;AAMA,UAAMJ,KAAK,CAAC,mBAAD,EAAsB;AAC7BC,MAAAA,MAAM,EAAC,KADsB;AAE7BC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFoB,KAAtB,CAAL,CAIDC,IAJC,CAIIC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJX,EAKDF,IALC,CAKIC,GAAG,IAAI,KAAKR,QAAL,CAAc;AAAChB,MAAAA,eAAe,EAAE0B,IAAI,CAACC,KAAL,CAAWH,GAAX;AAAlB,KAAd,CALX,CAAN;AAMA,SAAK3B,KAAL,CAAWC,WAAX,CAAuB8B,OAAvB,CAA+B,CAACtC,QAAD,EAAWuC,KAAX,KAAqB;AAChD,YAAMC,EAAE,GAAGZ,QAAQ,CAACC,cAAT,CAAwBU,KAAK,GAAC,CAA9B,CAAX;;AACA,UAAGC,EAAE,KAAK,IAAV,EAAgB;AACZ,cAAMC,CAAC,GAAGb,QAAQ,CAACc,aAAT,CAAuB,GAAvB,CAAV;AACAD,QAAAA,CAAC,CAACjB,EAAF,GAAOe,KAAK,GAAG,CAAf;AACAE,QAAAA,CAAC,CAACE,SAAF,GAAc3C,QAAQ,CAAC4C,YAAvB;;AACAH,QAAAA,CAAC,CAACI,OAAF,GAAY,MAAM,KAAKzB,eAAL,CAAqBpB,QAAQ,CAACwB,EAA9B,CAAlB;;AACAG,QAAAA,GAAG,CAACmB,WAAJ,CAAgBL,CAAhB;AACH;AACJ,KATD;AAUH;;AAEiB,QAAZtB,YAAY,GAAE;AAChB,UAAM4B,IAAI,GAAGnB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAb;AACA,UAAMC,KAAK,CAAC,uBAAD,EAA0B;AACjCC,MAAAA,MAAM,EAAC,KAD0B;AAEjCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFwB,KAA1B,CAAL,CAIDC,IAJC,CAIIC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJX,EAKDF,IALC,CAKIC,GAAG,IAAI,KAAKR,QAAL,CAAc;AAACX,MAAAA,YAAY,EAAEqB,IAAI,CAACC,KAAL,CAAWH,GAAX;AAAf,KAAd,CALX,CAAN;AAMA,SAAK3B,KAAL,CAAWQ,YAAX,CAAwBuB,OAAxB,CAAgC,CAACtC,QAAD,EAAWuC,KAAX,KAAqB;AACjD,YAAMC,EAAE,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,SAASU,KAAK,GAAC,CAAf,CAAxB,CAAX;;AACA,UAAGC,EAAE,KAAK,IAAV,EAAgB;AACZ,cAAMC,CAAC,GAAGb,QAAQ,CAACc,aAAT,CAAuB,GAAvB,CAAV;AACAD,QAAAA,CAAC,CAACjB,EAAF,GAAO,SAASe,KAAK,GAAG,CAAjB,CAAP;AACAE,QAAAA,CAAC,CAACE,SAAF,GAAc3C,QAAQ,CAAC4C,YAAvB;;AACAH,QAAAA,CAAC,CAACI,OAAF,GAAY,MAAM,KAAKxB,UAAL,CAAgBrB,QAAQ,CAACwB,EAAzB,CAAlB;;AACAuB,QAAAA,IAAI,CAACD,WAAL,CAAiBL,CAAjB;AACH;AACJ,KATD;;AAUA,QAAG,KAAKlC,KAAL,CAAWK,YAAd,EAA2B;AACvBmC,MAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACH,KAFD,MAGK;AACDF,MAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,GAAqB,OAArB;AACH;;AACD,SAAKvB,QAAL,CAAc;AAACd,MAAAA,YAAY,EAAE,CAAC,KAAKL,KAAL,CAAWK,YAA3B;AACVC,MAAAA,WAAW,EAAE,KADH;AAEVC,MAAAA,WAAW,EAAE;AAFH,KAAd;AAGH;;AAEDI,EAAAA,WAAW,GAAE;AACT,SAAKF,WAAL;AACA,UAAM+B,IAAI,GAAGnB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb;;AACA,QAAG,KAAKtB,KAAL,CAAWI,aAAd,EAA4B;AACxBoC,MAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACH,KAFD,MAGK;AACDF,MAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX,GAAqB,OAArB;AACH;;AACD,SAAKvB,QAAL,CAAc;AAACf,MAAAA,aAAa,EAAE,CAAC,KAAKJ,KAAL,CAAWI,aAA5B;AACME,MAAAA,WAAW,EAAE,KADnB;AAEMC,MAAAA,WAAW,EAAE;AAFnB,KAAd;AAGH;;AAEDQ,EAAAA,eAAe,GAAE;AACbtB,IAAAA,QAAQ,CAACkD,MAAT,CAAgB,CAAhB,EAAmBlD,QAAQ,CAACmD,MAA5B;AACAjD,IAAAA,IAAI,CAACgD,MAAL,CAAY,CAAZ,EAAehD,IAAI,CAACiD,MAApB;AACAlD,IAAAA,UAAU,CAACiD,MAAX,CAAkB,CAAlB,EAAqBjD,UAAU,CAACkD,MAAhC;AACAnD,IAAAA,QAAQ,CAACoD,IAAT,CAAc,KAAK7C,KAAL,CAAWO,WAAzB;AACA,SAAKP,KAAL,CAAWE,aAAX,CAAyBgB,MAAzB,CAAgCsB,IAAI,IAAIA,IAAI,CAACM,OAAL,IAAgB,KAAK9C,KAAL,CAAWO,WAAX,CAAuBU,EAA/E,EAAmFc,OAAnF,CAA2FgB,OAAO,IAAIrD,UAAU,CAACmD,IAAX,CAAgBE,OAAO,CAACC,KAAxB,CAAtG;AACA,SAAKhD,KAAL,CAAWG,eAAX,CAA2Be,MAA3B,CAAkCsB,IAAI,IAAIA,IAAI,CAACM,OAAL,IAAgB,KAAK9C,KAAL,CAAWO,WAAX,CAAuBU,EAAjF,EAAqFc,OAArF,CAA6FgB,OAAO,IAAIpD,IAAI,CAACkD,IAAL,CAAUE,OAAV,CAAxG;AACAnD,IAAAA,IAAI,CAACiD,IAAL,CAAU,IAAV;AACH;;AAEoB,QAAf7B,eAAe,GAAE;AACnB,UAAMO,KAAK,CAAC,qBAAD,EAAwB;AAC/BC,MAAAA,MAAM,EAAE,QADuB;AAE/BC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFsB;AAG/BwB,MAAAA,IAAI,EAAEpB,IAAI,CAACqB,SAAL,CAAe;AACjBjC,QAAAA,EAAE,EAAE,KAAKjB,KAAL,CAAWO,WAAX,CAAuBU;AADV,OAAf;AAHyB,KAAxB,CAAX;;AAOA,SAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,KAAKnD,KAAL,CAAWC,WAAX,CAAuB2C,MAA5C,EAAoDO,CAAC,EAArD,EAAwD;AACpD,YAAMjB,CAAC,GAAGb,QAAQ,CAACC,cAAT,CAAwB6B,CAAxB,CAAV;AACAjB,MAAAA,CAAC,CAACkB,UAAF,CAAaC,WAAb,CAAyBnB,CAAzB;AACH;;AACD,UAAM,KAAKvB,WAAL,EAAN;AACH;;AAED2C,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,KAAK,EAAE;AAAC,iBAAU;AAAX,OAAZ;AAAA,8BACI,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,GAAT;AAAA,+BACI;AAAQ,UAAA,EAAE,EAAE,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAII;AAAK,QAAA,EAAE,EAAE,aAAT;AAAA,gCACI;AAAK,UAAA,EAAE,EAAE,iBAAT;AAAA,kCACI;AAAM,YAAA,EAAE,EAAE,kBAAV;AAAA,oCACI;AAAG,cAAA,EAAE,EAAE,UAAP;AAAmB,cAAA,OAAO,EAAE,KAAK1C,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAG,cAAA,EAAE,EAAE,SAAP;AAAkB,cAAA,OAAO,EAAE,KAAKD,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AAAK,YAAA,EAAE,EAAE;AAAT;AAAA;AAAA;AAAA;AAAA,kBALJ,eAQI;AAAK,YAAA,EAAE,EAAE;AAAT;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAaK,KAAKX,KAAL,CAAWM,WAAX,iBAA0B;AAAM,UAAA,EAAE,EAAE,aAAV;AAAA,kCACvB;AAAK,YAAA,EAAE,EAAE,UAAT;AAAA,oCACI;AAAO,cAAA,EAAE,EAAE,YAAX;AAAyB,cAAA,OAAO,EAAC,OAAjC;AAAyC,cAAA,SAAS,EAAE,MAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAO,cAAA,EAAE,EAAC,OAAV;AAAkB,cAAA,SAAS,EAAE,MAA7B;AAAqC,cAAA,KAAK,EAAE,KAAKN,KAAL,CAAWO,WAAX,CAAuBgD;AAAnE;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADuB,eAKvB;AAAU,YAAA,EAAE,EAAE,SAAd;AAAyB,YAAA,KAAK,EAAE,KAAKvD,KAAL,CAAWO,WAAX,CAAuBiD;AAAvD;AAAA;AAAA;AAAA;AAAA,kBALuB,eAMvB;AAAK,YAAA,EAAE,EAAE,YAAT;AAAA,oCACI,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,mBAAV;AAAA,qCACI;AAAQ,gBAAA,EAAE,EAAE,mBAAZ;AAAiC,gBAAA,OAAO,EAAE,MAAM,KAAKzC,eAAL,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,qBAAV;AAAA,qCACI;AAAQ,gBAAA,EAAE,EAAE,mBAAZ;AAAiC,gBAAA,OAAO,EAAE,MAAM,KAAKA,eAAL,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAJJ,eAOI;AAAQ,cAAA,EAAE,EAAE,mBAAZ;AAAiC,cAAA,OAAO,EAAE,MAAM,KAAKC,eAAL,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBANuB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAb/B;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAqCH;;AA7KqC","sourcesContent":["import React, { Component } from \"react\"\nimport { Link } from \"react-router-dom\";\n\nexport let template = []\nexport let recipients = []\nexport let vars = []\nexport let show = []\n\nexport class UseTemplate extends Component{\n    constructor(props) {\n        super(props);\n        this.state= {\n            apiResponse: \"\",\n            apiResponseTo: \"\",\n            apiResponseVars: \"\",\n            myTempIsClick: false,\n            myDefIsClick: false,\n            tempClicked: false,\n            currentTemp: {},\n            defaultTemps: \"\"\n        }\n\n        this.myTemplates = this.myTemplates.bind(this)\n        this.showMyTemps = this.showMyTemps.bind(this)\n        this.showDefTemps = this.showDefTemps.bind(this)\n        this.templateOnClick = this.templateOnClick.bind(this)\n        this.defOnClick = this.defOnClick.bind(this)\n        this.UseTemplateFunc = this.UseTemplateFunc.bind(this)\n        this.DelTemplateFunc = this.DelTemplateFunc.bind(this)\n    }\n\n    templateOnClick(id){\n        const template = this.state.apiResponse.filter(template => template.id == id)[0]\n        this.setState({currentTemp: template,\n                            tempClicked: true})\n    }\n\n    defOnClick(id){\n        const template = this.state.defaultTemps.filter(template => template.id == id)[0]\n        this.setState({currentTemp: template,\n                            tempClicked: true})\n    }\n\n    async myTemplates(){\n        const div = document.getElementById(\"forTemps\")\n        await fetch(\"/useTemplate/templates\", {\n            method:'GET',\n            headers: { 'Content-Type': 'application/json' }\n        })\n            .then(res => res.text())\n            .then(res => this.setState({apiResponse: JSON.parse(res)}))\n        await fetch(\"/useTemplate/recipients\", {\n            method:'GET',\n            headers: { 'Content-Type': 'application/json' }\n        })\n            .then(res => res.text())\n            .then(res => this.setState({apiResponseTo: JSON.parse(res)}))\n        await fetch(\"/useTemplate/vars\", {\n            method:'GET',\n            headers: { 'Content-Type': 'application/json' }\n        })\n            .then(res => res.text())\n            .then(res => this.setState({apiResponseVars: JSON.parse(res)}))\n        this.state.apiResponse.forEach((template, index) => {\n            const ep = document.getElementById(index+1)\n            if(ep === null) {\n                const p = document.createElement(\"p\")\n                p.id = index + 1\n                p.innerHTML = template.templateName\n                p.onclick = () => this.templateOnClick(template.id)\n                div.appendChild(p)\n            }\n        })\n    }\n\n    async showDefTemps(){\n        const temp = document.getElementById(\"forDefs\")\n        await fetch(\"/useTemplate/defaults\", {\n            method:'GET',\n            headers: { 'Content-Type': 'application/json' }\n        })\n            .then(res => res.text())\n            .then(res => this.setState({defaultTemps: JSON.parse(res)}))\n        this.state.defaultTemps.forEach((template, index) => {\n            const ep = document.getElementById(\"def\" + (index+1))\n            if(ep === null) {\n                const p = document.createElement(\"p\")\n                p.id = \"def\" + (index + 1)\n                p.innerHTML = template.templateName\n                p.onclick = () => this.defOnClick(template.id)\n                temp.appendChild(p)\n            }\n        })\n        if(this.state.myDefIsClick){\n            temp.style.display = \"none\"\n        }\n        else {\n            temp.style.display = \"block\"\n        }\n        this.setState({myDefIsClick: !this.state.myDefIsClick,\n            tempClicked: false,\n            currentTemp: null})\n    }\n\n    showMyTemps(){\n        this.myTemplates()\n        const temp = document.getElementById(\"forTemps\")\n        if(this.state.myTempIsClick){\n            temp.style.display = \"none\"\n        }\n        else {\n            temp.style.display = \"block\"\n        }\n        this.setState({myTempIsClick: !this.state.myTempIsClick,\n                            tempClicked: false,\n                            currentTemp: null})\n    }\n\n    UseTemplateFunc(){\n        template.splice(0, template.length)\n        vars.splice(0, vars.length)\n        recipients.splice(0, recipients.length)\n        template.push(this.state.currentTemp)\n        this.state.apiResponseTo.filter(temp => temp.tableId == this.state.currentTemp.id).forEach(element => recipients.push(element.email))\n        this.state.apiResponseVars.filter(temp => temp.tableId == this.state.currentTemp.id).forEach(element => vars.push(element))\n        show.push(true)\n    }\n\n    async DelTemplateFunc(){\n        await fetch(\"/useTemplate/delete\", {\n            method: 'DELETE',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                id: this.state.currentTemp.id\n            })\n        })\n        for (let i = 1; i <= this.state.apiResponse.length; i++){\n            const p = document.getElementById(i)\n            p.parentNode.removeChild(p)\n        }\n        await this.showMyTemps()\n    }\n\n    render() {\n        return (\n            <div style={{\"width\" : \"100%\"}}>\n                <Link to=\"/\">\n                    <button id={\"back\"}>Back</button>\n                </Link>\n                <div id={\"UseTempsDiv\"}>\n                    <div id={\"useTempsGeneral\"}>\n                        <span id={\"useTemplatesMenu\"}>\n                            <p id={\"defTemps\"} onClick={this.showDefTemps}>Default Templates</p>\n                            <p id={\"myTemps\"} onClick={this.showMyTemps}>My Templates</p>\n                        </span>\n                        <div id={\"forTemps\"}>\n\n                        </div>\n                        <div id={\"forDefs\"}>\n\n                        </div>\n                    </div>\n                    {this.state.tempClicked && <span id={\"exampleSpan\"}>\n                        <div id={\"titleDiv\"}>\n                            <label id={\"titleLabel\"} htmlFor=\"title\" className={\"form\"} >title</label>\n                            <input id=\"title\" className={\"form\"} value={this.state.currentTemp.templateTitle}/>\n                        </div>\n                        <textarea id={\"example\"} value={this.state.currentTemp.templateText}/>\n                        <div id={\"useButtons\"}>\n                            <Link to={\"/useTemplate/send\"}>\n                                <button id={\"useTemplateButton\"} onClick={() => this.UseTemplateFunc()}>Use</button>\n                            </Link>\n                            <Link to={\"/useTemplate/modify\"}>\n                                <button id={\"modTemplateButton\"} onClick={() => this.UseTemplateFunc()}>Modify</button>\n                            </Link>\n                            <button id={\"delTemplateButton\"} onClick={() => this.DelTemplateFunc()}>Delete</button>\n                        </div>\n                    </span>}\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}